<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Connexion Â· Predictor</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="head">
        <div class="flag">ğŸ‡¨ğŸ‡©</div>
        <div class="h1" id="t">Congo WinKey</div>
        <div class="h2" id="s">Signaux rapides Â· Fait pour Kinshasa Â· CDF</div>

        <div class="badges">
          <span class="badge gold">ğŸ”’ Secure</span>
          <span class="badge green">âœ… VÃ©rifiÃ©</span>
          <span class="badge blue">ğŸ“ Support local</span>
        </div>
      </div>

      <div class="body">
        <div class="sectionTitle">Connexion (identifiants reÃ§us en privÃ©)</div>

        <div class="field">
          <label>Login <small>privÃ©</small></label>
          <input id="login" placeholder="Votre login" autocomplete="off" />
        </div>

        <div class="field">
          <label>Mot de passe <small>privÃ©</small></label>
          <input id="pass" type="password" placeholder="â€¢â€¢â€¢â€¢" autocomplete="off" />
        </div>

        <button class="btn" id="go">Continuer</button>
        <div class="alert" id="msg"></div>

        <div class="bottom">
          <div class="live"><span class="liveDot"></span> AccÃ¨s privÃ©</div>
          <div class="timer">Session: <b>â€”</b></div>
        </div>
      </div>

      <div class="foot">
        <span>18+ â€¢ Jeu responsable</span>
        <span>Ce site ne traite aucun paiement</span>
      </div>
    </div>
  </div>

  <script src="./config.js"></script>
  <script>
    const A = window.APP;

    // brand text
    document.getElementById("t").textContent = A.TITLE || "Congo WinKey";
    document.getElementById("s").textContent = A.SUBTITLE || "";

    // session timer init (shared)
    const key = "expTs";
    if (!sessionStorage.getItem(key)) {
      sessionStorage.setItem(key, String(Date.now() + (A.ACCESS_TIMER_MIN || 8) * 60 * 1000));
    }
    const timerEl = document.querySelector(".timer b");
    function tick(){
      const exp = Number(sessionStorage.getItem(key) || 0);
      const left = Math.max(0, exp - Date.now());
      const mm = String(Math.floor(left/60000)).padStart(2,"0");
      const ss = String(Math.floor((left%60000)/1000)).padStart(2,"0");
      timerEl.textContent = `${mm}:${ss}`;
    }
    tick(); setInterval(tick, 500);

    if (sessionStorage.getItem("authed") === "1") location.href = "./app.html";

    const msg = document.getElementById("msg");
    const show = (t)=>{ msg.style.display="block"; msg.textContent=t; };

    document.getElementById("go").addEventListener("click", ()=>{
      const l = document.getElementById("login").value.trim();
      const p = document.getElementById("pass").value.trim();

      if(!l || !p) return show("Veuillez saisir votre login et votre mot de passe.");
      if(l !== A.LOGIN || p !== A.PASS) return show("Identifiants incorrects. VÃ©rifiez le message reÃ§u.");

      sessionStorage.setItem("authed","1");
      sessionStorage.setItem("user", l);
      location.href = "./app.html";
    });
  </script>
</body>
</html>
