<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Connexion</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="head">
        <div class="logo">üß≠</div>
        <div class="h1" id="brand">Congo WinKey</div>
        <div class="h2" id="sub">Acc√®s priv√© ‚Ä¢ Fait pour Kinshasa ‚Ä¢ CDF</div>

        <div class="badges">
          <span class="badge gold">üîí Secure</span>
          <span class="badge green">‚úÖ V√©rifi√©</span>
          <span class="badge blue">üìç Support local</span>
        </div>
      </div>

      <div class="body">
        <div class="sectionTitle">Connexion (identifiants re√ßus en priv√©)</div>

        <div class="field">
          <label>Login <small>priv√©</small></label>
          <input id="login" placeholder="Votre login" autocomplete="off" />
        </div>

        <div class="field">
          <label>Mot de passe <small>priv√©</small></label>
          <input id="pass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="off" />
        </div>

        <button class="btn" id="go">Continuer</button>
        <div class="alert" id="msg"></div>

        <div class="bottom">
          <div class="live"><span class="liveDot"></span> Acc√®s priv√©</div>
          <div class="timer">Session: <b id="timer">‚Äî</b></div>
        </div>
      </div>

      <div class="foot">
        <span>18+ ‚Ä¢ Utilisation responsable</span>
        <span>Ce site ne traite aucun paiement</span>
      </div>
    </div>
  </div>

  <script src="./config.js"></script>
  <script>
    const A = window.APP;

    document.getElementById("brand").textContent = A.BRAND || "Congo WinKey";
    document.getElementById("sub").textContent = A.SUBTITLE || "";

    const key = "expTs";
    function ensureExp(){
      const now = Date.now();
      const cur = Number(sessionStorage.getItem(key) || 0);
      const dur = (A.SESSION_MIN || 8) * 60 * 1000;
      if (!cur || cur < now) sessionStorage.setItem(key, String(now + dur));
    }
    ensureExp();

    const timerEl = document.getElementById("timer");
    function tick(){
      ensureExp();
      const exp = Number(sessionStorage.getItem(key) || 0);
      const left = Math.max(0, exp - Date.now());
      const mm = String(Math.floor(left/60000)).padStart(2,"0");
      const ss = String(Math.floor((left%60000)/1000)).padStart(2,"0");
      timerEl.textContent = `${mm}:${ss}`;
    }
    tick(); setInterval(tick, 500);

    if (sessionStorage.getItem("authed") === "1") location.href = "./app.html";

    const msg = document.getElementById("msg");
    const show = (t)=>{ msg.style.display="block"; msg.textContent=t; };

    document.getElementById("go").addEventListener("click", ()=>{
      const l = document.getElementById("login").value.trim();
      const p = document.getElementById("pass").value.trim();

      if(!l || !p) return show("Veuillez saisir votre login et votre mot de passe.");
      if(l !== A.LOGIN || p !== A.PASS) return show("Identifiants incorrects. V√©rifiez le message re√ßu.");

      sessionStorage.setItem("authed","1");
      sessionStorage.setItem("user", l);
      location.href = "./app.html";
    });
  </script>
</body>
</html>
